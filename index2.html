<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>é­”æ³•è£å‚™</title>
<style>
  body {
    background: radial-gradient(circle at top, #222, #111);
    color: #fff;
    font-family: "å¾®è»Ÿæ­£é»‘é«”", sans-serif;
    text-align: center;
    margin:0; padding:0;
  }
  h1 { margin: 20px 0; }

.tab-btn {
background: #444;
color: #fff;
border: none;
padding: 8px 16px;
margin: 0 4px;
border-radius: 8px;
cursor: pointer;
}
.tab-btn:hover { background: #666; }

.page { display: none; }

.equip-container {
position: relative;
width: 320px;
height: 420px;
margin: 20px auto;
border: 3px solid #555;
border-radius: 12px;
background: rgba(255,255,255,0.05);
box-shadow: 0 0 10px #333 inset;
}
.equip-slot {
position: absolute;
width: 64px;
height: 64px;
border: 2px solid #777;
border-radius: 8px;
background: rgba(255,255,255,0.1);
display: flex;
justify-content: center;
align-items: center;
cursor: pointer;
transition: 0.2s;
font-size: 32px;
}
.equip-slot:hover { border-color: gold; transform: scale(1.05); }

.head { top: 20px; left: 128px; }
.neck { top: 100px; left: 128px; }
.body { top: 180px; left: 128px; }
.waist { top: 260px; left: 128px; }
.hands { top: 180px; left: 48px; }
.weapon { top: 180px; left: 208px; }
.legs { top: 260px; left: 48px; }
.boots { top: 260px; left: 208px; }
.accessory { top: 340px; left: 128px; }

.storage-box {
width: 320px;
margin: 20px auto;
border: 2px solid #555;
border-radius: 10px;
background: rgba(255,255,255,0.05);
padding: 10px;
}
.storage-item {
display: inline-block;
font-size: 28px;
margin: 4px;
cursor: pointer;
}

.student-select {
margin-top: 10px;
font-size: 16px;
padding: 4px 8px;
border-radius: 6px;
border: none;
background: #333;
color: white;
}

.tooltip {
position: fixed;
bottom: 30px;
left: 50%;
transform: translateX(-50%);
background: rgba(50,50,50,0.9);
color: #fff;
padding: 10px 16px;
border-radius: 8px;
display: none;
max-width: 80%;
}

.student {
background: rgba(255,255,255,0.05);
border: 2px solid #555;
border-radius: 10px;
margin: 10px auto;
padding: 10px;
width: 90%;
max-width: 500px;
box-shadow: 0 0 10px #333 inset;
font-size: 14px;
}
.equip-line {
display: flex;
justify-content: space-between;
padding: 4px 10px;
border-bottom: 1px solid #444;
}
.equip-line:last-child { border-bottom: none; }
.icon { font-size: 24px; }

.back-btn {
background: #444;
color: #fff;
border: none;
padding: 8px 16px;
border-radius: 8px;
cursor: pointer;
margin-bottom: 20px;
}
.back-btn:hover { background: #666; } </style>

</head>
<body>

<h1>é­”æ³•å¸«è£å‚™</h1>
<div>
  <button class="tab-btn" data-page="equipPage">é­”æ³•è£å‚™</button>
  <button class="tab-btn" data-page="allPage">å…¨å“¡ä¸€è¦½</button>
  <button class="tab-btn" data-page="catalogPage">è£å‚™å¤§å…¨</button>
  <button onclick="window.location.href='index.html'" 
          style="background:#222244; color:#ffd700; border:1px solid #ffd700; 
                 padding:10px 20px; border-radius:8px; font-weight:bold; cursor:pointer;">
    é­”æ³•è­°æœƒ
  </button>
  <button onclick="window.location.href='index3.html'" 
          style="background:#222244; color:#ffd700; border:1px solid #ffd700; 
                 padding:10px 20px; border-radius:8px; font-weight:bold; cursor:pointer;">
    é­”æ³•å•†åº—
  </button>
</div>

<div class="page" id="equipPage">
  <select id="studentSelect" class="student-select"></select>

  <div class="equip-container" id="equipContainer"></div>

  <div class="storage-box" id="storageBox">
    <h3>å€‰åº«</h3>
    <div id="storageItems"></div>
  </div>
</div>

<div class="page" id="allPage">
  <div id="allContainer"></div>
</div>

<div class="page" id="catalogPage">
  <input type="text" id="catalogSearch" placeholder="ğŸ” æœå°‹è£å‚™åç¨±æˆ–èªªæ˜" style="width:90%;max-width:400px;margin:10px 0;padding:6px;border-radius:6px;border:none;font-size:16px;">
  <div id="catalogContainer"></div>
</div>

<div id="tooltip" class="tooltip"></div>

<script>
const equipSlots = [
  "head","body","hands","weapon","legs","boots",
  "neck","waist","accessory"
];

// åˆå§‹åŒ– 29 åå­¸ç”Ÿ
const equipData = Array.from({length:29}, (_,i)=>{
  const student={name:`${i+1}è™Ÿå­¸ç”Ÿ`, storage:[]};
  equipSlots.forEach(slot=>student[slot]=null);
  return student;
});

// ç¯„ä¾‹è£å‚™
equipData[28].head={icon:"ğŸ»",name:"æ£•ç†Šå¸½",desc:"ã€é ­éƒ¨ã€‘"};
equipData[28].body={icon:"ğŸ•",name:"æŠ«è–©",desc:"ã€ç›”ç”²ã€‘"};
equipData[28].hands={icon:"ğŸ–Šï¸",name:"ç©å…·é‹¼ç­†",desc:"ã€æ‰‹éƒ¨ã€‘"};
equipData[28].weapon={icon:"ğŸ“š",name:"æ›¸æœ¬",desc:"ã€æ­¦å™¨ã€‘"};
equipData[28].legs={icon:"ğŸ‘–",name:"èˆè¹ˆè¤²",desc:"ã€è…¿éƒ¨ã€‘"};
equipData[28].boots={icon:"ğŸ¥¾",name:"æ¢éšªé´",desc:"ã€é´å­ã€‘"};
equipData[28].neck={icon:"ğŸ“¿",name:"å¹¸é‹é …éŠ",desc:"ã€é ¸éƒ¨ã€‘"};
equipData[28].waist={icon:"ğŸ€",name:"é­”æ³•è­°æœƒè…°å¸¶",desc:"ã€è…°éƒ¨ã€‘"};
equipData[28].accessory={icon:"ğŸ–ï¸",name:"é­”æ³•å¾½ç« ",desc:"ã€é£¾å“ã€‘"};
equipData[28].storage.push({icon:"ğŸ†",name:"å„ªç­‰ç”Ÿçç›ƒ",desc:"ã€å…¶ä»–ã€‘"});

// å…¶ä»–å­¸ç”ŸåŒç†ï¼Œå¯ä¾éœ€æ±‚å¡«å¯«

const studentSelect=document.getElementById("studentSelect");
const equipContainer=document.getElementById("equipContainer");
const storageItems=document.getElementById("storageItems");
const tooltip=document.getElementById("tooltip");
const allContainer=document.getElementById("allContainer");
const catalogContainer=document.getElementById("catalogContainer");

// å‹•æ…‹ç”Ÿæˆæ ¼å­
equipSlots.forEach(slot=>{
  const div=document.createElement("div");
  div.className=`equip-slot ${slot}`;
  div.dataset.slot=slot;
  equipContainer.appendChild(div);
});

// ç”Ÿæˆå­¸ç”Ÿé¸å–®
equipData.forEach((s,i)=>{
  const opt=document.createElement("option");
  opt.value=i;
  opt.textContent=s.name;
  studentSelect.appendChild(opt);
});

function showTooltip(item){
  tooltip.innerHTML=`<strong>${item.name}</strong><br>${item.desc}`;
  tooltip.style.display="block";
  setTimeout(()=>tooltip.style.display="none",2000);
}

function renderEquip(){
  const i=parseInt(studentSelect.value);
  const data=equipData[i];
  document.querySelectorAll(".equip-slot").forEach(slot=>{
    const part=slot.dataset.slot;
    const item=data[part];
    slot.textContent=item?item.icon:"â”";
  });
  storageItems.innerHTML="";
  data.storage.forEach(item=>{
    const span=document.createElement("span");
    span.className="storage-item";
    span.textContent=item.icon;
    span.onclick=()=>showTooltip(item);
    storageItems.appendChild(span);
  });
}

equipContainer.addEventListener("click",(e)=>{
  const slot=e.target.closest(".equip-slot");
  if(!slot) return;
  const part=slot.dataset.slot;
  const i=parseInt(studentSelect.value);
  const item=equipData[i][part];
  if(item) showTooltip(item);
});

studentSelect.addEventListener("change",renderEquip);

// å…¨å“¡æ”»ç•¥
function renderAll(){
  allContainer.innerHTML="";
  equipData.forEach(player=>{
    const div=document.createElement("div");
    div.className="student";
    let html=`<h2>${player.name}</h2>`;
    equipSlots.forEach(p=>{
      const names={head:"é ­éƒ¨",body:"èº«é«”",hands:"æ‰‹éƒ¨",weapon:"æ­¦å™¨",legs:"è…¿éƒ¨",boots:"é‹å­",neck:"é ¸éƒ¨",waist:"è…°éƒ¨",accessory:"é£¾å“"};
      const item=player[p];
      if(item) html+=`<div class="equip-line"><span>${names[p]}</span><span class="icon">${item.icon}</span><span>${item.name}</span><span>${item.desc}</span></div>`;
    });
    if(player.storage.length){
      html+=`<div class="equip-line"><strong>å…¶ä»–è£å‚™ï¼š</strong></div>`;
      player.storage.forEach(st=>html+=`<div class="equip-line"><span class="icon">${st.icon}</span><span>${st.name}</span><span>${st.desc}</span></div>`);
    }
    div.innerHTML=html;
    allContainer.appendChild(div);
  });
}

// è£å‚™å¤§å…¨
function renderCatalog(){
  const query=catalogSearch.value.trim().toLowerCase();
  catalogContainer.innerHTML="";
  const allEquip={};
  equipData.forEach(player=>{
    equipSlots.forEach(part=>{
      const item=player[part];
      if(item) allEquip[item.name]=item;
    });
    player.storage.forEach(st=>allEquip[st.name]=st);
  });
  Object.values(allEquip).forEach(item=>{
    if(query && !item.name.toLowerCase().includes(query) && !item.desc.toLowerCase().includes(query)) return;
    const div=document.createElement("div");
    div.className="student";
    div.innerHTML=`<div class="equip-line"><span class="icon">${item.icon}</span><span>${item.name}</span><span>${item.desc}</span></div>`;
    catalogContainer.appendChild(div);
  });
}

// é é¢åˆ‡æ›
const pages=document.querySelectorAll(".page");
function showPage(id){
  pages.forEach(p=>p.style.display="none");
  document.getElementById(id).style.display="block";
  if(id==="allPage") renderAll();
  if(id==="catalogPage") renderCatalog();
}

document.querySelectorAll(".tab-btn").forEach(btn=>{
  btn.addEventListener("click",()=>showPage(btn.dataset.page));
});

// æœå°‹
const catalogSearch=document.getElementById("catalogSearch");
catalogSearch.addEventListener("input", renderCatalog);

// é è¨­
renderEquip();
showPage("equipPage");
</script>

</body>
</html>
