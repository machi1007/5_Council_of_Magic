<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>é­”æ³•è¼‰å…·é­”åŠ›ç®±</title>
<style>
  body {
    background: radial-gradient(circle at center, #071025, #000);
    color: #fff;
    font-family: "Noto Sans TC", sans-serif;
    text-align: center;
    margin: 0;
    padding: 24px;
  }
  h1 { color:#bfa6ff; text-shadow:0 0 12px #7b5cff; margin-bottom:18px; }

  .container {
    max-width:1200px;
    margin:0 auto;
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(220px,1fr));
    gap:24px;
    padding: 8px;
  }

  .student {
    background: rgba(255,255,255,0.04);
    border-radius:14px;
    padding:12px;
    min-height:170px;
    position:relative;
    overflow:hidden;
    box-shadow: 0 6px 18px rgba(0,0,0,0.6);
    transition: transform .18s ease, box-shadow .18s ease;
  }
  .student:hover { transform: translateY(-6px); box-shadow: 0 18px 34px rgba(0,0,0,0.7); }

  .avatar {
    width:72px;
    height:72px;
    border-radius:50%;
    display:inline-block;
    vertical-align:middle;
    margin-bottom:8px;
    object-fit:cover;
    border:3px solid rgba(255,255,255,0.08);
    box-shadow: 0 0 16px rgba(0,0,0,0.6);
    background: linear-gradient(135deg, rgba(255,255,255,0.04), transparent);
  }

  .avatar.glow { box-shadow: 0 0 24px rgba(255,255,255,0.06), 0 0 40px; }

  .meta { margin-top:6px; }
  .number { font-weight:700; opacity:0.85; }
  .score { font-size:1.8rem; margin-top:6px; font-weight:700; }

  .bar-bg {
    height:12px; width:86%; margin:10px auto 0;
    background: rgba(255,255,255,0.06); border-radius:999px; overflow:hidden;
    box-shadow: inset 0 0 8px rgba(0,0,0,0.5);
  }
  .bar {
    height:100%; width:0%;
    border-radius:999px;
    transition: width 900ms cubic-bezier(.2,.9,.3,1);
    box-shadow: 0 0 10px rgba(0,0,0,0.4);
    filter: drop-shadow(0 0 6px rgba(0,0,0,0.4));
  }

  /* Level-specific outer glow color (also used to tint avatar border) */
  .lv1 .avatar { box-shadow: 0 0 10px rgba(80,80,80,0.6); }
  .lv2 .avatar { box-shadow: 0 0 14px rgba(63,191,191,0.6); }
  .lv3 .avatar { box-shadow: 0 0 18px rgba(64,224,208,0.6); }
  .lv4 .avatar { box-shadow: 0 0 22px rgba(0,191,255,0.7); }
  .lv5 .avatar { box-shadow: 0 0 26px rgba(255,215,0,0.8); }
  .lv6 .avatar { box-shadow: 0 0 30px rgba(255,110,199,0.9); }

  /* colored bars per level (use inline style for fine control) */
  .badge {
    position:absolute; right:12px; top:12px;
    background: rgba(255,255,255,0.06); padding:6px 10px; border-radius:999px;
    font-weight:700; font-size:0.85rem; box-shadow: 0 6px 18px rgba(0,0,0,0.6);
  }

  /* small mobile tweak */
  @media (max-width:480px){
    .avatar{width:64px;height:64px}
    .bar-bg{width:92%}
  }
</style>
</head>
<body>
  <h1>âœ¨ é­”æ³•è¼‰å…·é­”åŠ›ç®±</h1>
  <div class="container" id="studentList"></div>

<script>
/*
  ä½¿ç”¨èªªæ˜ï¼š
  - avatarStyle: DiceBear çš„é¢¨æ ¼ï¼ˆå¯æ”¹æˆ adventurerã€botttsã€pixel-artã€identiconã€avataaars ç­‰ï¼‰
  - seed ä½¿ç”¨ "id:NUMBER"ï¼ˆç©©å®šç”¢ç”Ÿç›¸åŒ avatarï¼‰ï¼Œä½ ä¹Ÿå¯æ”¹æˆå­¸è™Ÿã€å§“åæˆ– emailï¼ˆæ³¨æ„éš±ç§ï¼‰
  - å¦‚æœç¶²è·¯ç„¡æ³•è¼‰å…¥ DiceBear åœ–ï¼Œæœƒé¡¯ç¤º fallbackEmoji
*/

// ------ å¯èª¿åƒæ•¸ ------
const avatarStyle = "adventurer"; // æ›é¢¨æ ¼è©¦è©¦ï¼šbottts, pixel-art, identicon, avataaars...
const useGradientBackground = true; // è‹¥æƒ³è¦èƒŒæ™¯æ¼¸å±¤å¯å˜—è©¦ true
const fallbackEmoji = "ğŸ§™"; // è‹¥ç„¡æ³•è¼‰å…¥ avatarï¼Œç”¨ emoji é¡¯ç¤º

// ------ å­¸ç”Ÿè³‡æ–™: 28 ä½ç¯„ä¾‹ï¼ˆä½ å¯æ›æˆå­¸è™Ÿï¼‰ ------
const students = Array.from({length:28}, (_,i) => {
  // ç¯„ä¾‹åˆ†æ•¸éš¨æ©Ÿä½†ç©©å®šï¼ˆä½ æœƒåœ¨ç¨‹å¼ç¢¼è£¡ç›´æ¥æ”¹åˆ†æ•¸ï¼‰
  const preset = [
0,  //1
0,  //2
0,  //3
0,  //4
0,  //5
0,  //6
0,  //7
0,  //8
0,  //9
0,  //10
0,  //11
0,  //12
0,  //13
0,  //14
0,  //15
0,  //16
0,  //17
0,  //18
0,  //19
0,  //20
0,  //21
0,  //22
0,  //23
0,  //24
0,  //25
0,  //26
0,  //27
0   //28

];
  return {
    number: i+1,
    score: preset[i] ?? Math.floor(Math.random()*101)
  };
});

// ç­‰ç´šèˆ‡é¡è‰²å°æ‡‰å‡½æ•¸
function getLevel(score){
  if (score < 20) return "lv1";
  if (score < 40) return "lv2";
  if (score < 60) return "lv3";
  if (score < 80) return "lv4";
  if (score < 100) return "lv5";
  return "lv6";
}
function getBarStyle(score){
  if (score < 20) return { bg: "linear-gradient(90deg,#3a3a3a,#666)", glow: "rgba(120,120,120,0.14)" };
  if (score < 40) return { bg: "linear-gradient(90deg,#2b6cff,#6fffe0)", glow: "rgba(63,191,191,0.18)" };
  if (score < 60) return { bg: "linear-gradient(90deg,#0ff,#40e0d0)", glow: "rgba(64,224,208,0.18)" };
  if (score < 80) return { bg: "linear-gradient(90deg,#00bfff,#1e90ff)", glow: "rgba(0,191,255,0.18)" };
  if (score < 100) return { bg: "linear-gradient(90deg,#ffd700,#fffacd)", glow: "rgba(255,215,0,0.22)" };
  return { bg: "linear-gradient(90deg,#ff6ec7,#ffb3e6)", glow: "rgba(255,110,199,0.26)" };
}

// ç”¨ DiceBear ç”¢ç”Ÿ avatar URLï¼ˆseed å¯è‡ªè¨‚ï¼‰
function makeDiceBearUrl(seed) {
  const style = "bottts"; // æˆ–å…¶ä»–ä½ é¸çš„é¢¨æ ¼
  return `https://api.dicebear.com/9.x/${style}/svg?seed=${encodeURIComponent(seed)}`;
}

// é¡¯ç¤º students
const container = document.getElementById("studentList");
students.forEach(s => {
  const level = getLevel(s.score);
  const barInfo = getBarStyle(s.score);
  const seed = `id:${s.number}`; // å¯æ”¹æˆå­¸è™Ÿæˆ–å…¶ä»–å”¯ä¸€å€¼
  const imgUrl = makeDiceBearUrl(seed);

  const card = document.createElement("div");
  card.className = `student ${level}`;

  // avatar element with fallback handling
  const avatarWrap = document.createElement("div");
  avatarWrap.style.marginBottom = "6px";
  const img = document.createElement("img");
  img.className = "avatar";
  img.alt = `avatar-${s.number}`;
  img.src = imgUrl;

  // å¦‚æœè¼‰å…¥å¤±æ•—ï¼Œå°±æ”¹å› emojiï¼ˆä¾‹å¦‚å…§åµŒ data URI æˆ–æ–‡å­—ï¼‰
  img.onerror = () => {
    // ä»¥ emoji é¡¯ç¤ºï¼šå»ºç«‹ä¸€å€‹æ›¿ä»£çš„åœ“å½¢ div
    const emoji = document.createElement("div");
    emoji.className = "avatar";
    emoji.style.display = "inline-flex";
    emoji.style.alignItems = "center";
    emoji.style.justifyContent = "center";
    emoji.style.fontSize = "32px";
    emoji.textContent = fallbackEmoji;
    avatarWrap.replaceChild(emoji, img);
  };

  avatarWrap.appendChild(img);

const badge = document.createElement("div");
badge.className = "badge";

switch(level){
  case "lv6": badge.textContent = "lv6é­”æ³•æˆå½¢"; break;
  case "lv5": badge.textContent = "lv5é­”æ³•é››å½¢"; break;
  case "lv4": badge.textContent = "lv4æ˜Ÿç’°å‡èš"; break;
  case "lv3": badge.textContent = "lv3å…ƒç´ å›éŸ¿"; break;
  case "lv2": badge.textContent = "lv2éˆèƒ½èŒèŠ½"; break;
  default: badge.textContent = "lv1å¹»å…‰å¾®èŠ’";
}


  const num = document.createElement("div");
  num.className = "number";
  num.textContent = `#${s.number}`;

  const scoreEl = document.createElement("div");
  scoreEl.className = "score";
  scoreEl.textContent = s.score;

  const barBg = document.createElement("div");
  barBg.className = "bar-bg";
  const bar = document.createElement("div");
  bar.className = "bar";
  const width = Math.max(0, Math.min(100, s.score));
  bar.style.width = width + "%";
  bar.style.background = barInfo.bg;
  bar.style.boxShadow = `0 0 12px ${barInfo.glow}`;

  barBg.appendChild(bar);

  // ç•«é¢çµæ§‹
  card.appendChild(avatarWrap);
  card.appendChild(badge);
  card.appendChild(num);
  card.appendChild(scoreEl);
  card.appendChild(barBg);

  container.appendChild(card);
});

// ï¼ˆå¯é¸ï¼‰è®“ avatar é»æ“Šé¡¯ç¤ºè©³ç´°è³‡è¨Šæˆ–çå‹µ
container.addEventListener("click", (e) => {
  const card = e.target.closest(".student");
  if (!card) return;
  const idx = Array.from(container.children).indexOf(card);
  const s = students[idx];
  if (!s) return;
  alert(`é­”æ³•å¸« #${s.number}\né­”åŠ›ï¼š${s.score}\né€²åº¦ï¼š${getLevel(s.score)}`);
});
</script>
</body>
</html>
